import{_ as j,g as F,r as v,o as R,h as r,i as q,l as V,b as g,c as k,j as n,t as _,n as a,e as i,k as c,p as A,a as D,F as H,A as K,m as L,q as M,s as O,v as G}from"./index-7498dde3.js";const J=h=>(O("data-v-4d640f64"),h=h(),G(),h),Q={class:"card"},W={class:"header"},X={class:"subtitle"},Y={class:"toolbar"},Z=J(()=>n("div",{class:"empty-message"},[n("i",{class:"pi pi-database",style:{"font-size":"2rem"}})],-1)),ee={class:"p-fluid"},se={class:"p-field"},ae={for:"permissionName"},oe={class:"p-field"},ie={for:"translatedName"},le={class:"p-field"},ne={for:"description"},te={setup(h){const{t:e}=F(),C=v({}),x=v([]),p=v(!0),y=v(0),f=v(!1),t=v({id:"",name:"",description:"",translated_name:""}),I=o=>{const s=[];for(const[d,u]of Object.entries(o))s.push({name:e(`permissions.modules.${d}`),value:d,permissions:u});return s.sort((d,u)=>d.name.localeCompare(u.name)),s},b=()=>{p.value=!0,D.get("api/role/get/permissions").then(o=>{C.value=o.data.data,x.value=I(o.data.data),p.value=!1}).catch(o=>{console.error("Error fetching permissions:",o),p.value=!1})},N=o=>{f.value=!0,t.value={id:o.id,name:o.name,description:o.description||"",translated_name:o.translated_name||""}},B=()=>{p.value=!0,D.put(`/api/role/permission/${t.value.id}`,{description:t.value.description,translated_name:t.value.translated_name}).then(()=>{b(),f.value=!1}).catch(o=>{console.error("Update failed:",o)}).finally(()=>{p.value=!1})};return R(()=>{b()}),(o,s)=>{const d=r("Button"),u=r("Column"),U=r("Tag"),P=r("DataTable"),$=r("TabPanel"),S=r("TabView"),w=r("InputText"),z=r("Textarea"),E=r("Dialog"),T=q("can");return V((g(),k("div",{class:A(["permissions-container",{rtl:o.$i18n.locale==="ar"}])},[n("div",Q,[n("div",W,[n("h1",null,_(a(e)("permissions.title")),1),n("p",X,_(a(e)("permissions.subtitle")),1)]),n("div",Y,[i(d,{icon:"pi pi-refresh",label:a(e)("permissions.refresh"),onClick:b,loading:p.value},null,8,["label","loading"])]),i(S,{activeIndex:y.value,"onUpdate:activeIndex":s[0]||(s[0]=l=>y.value=l),class:"grouped-tabs"},{default:c(()=>[(g(!0),k(H,null,K(x.value,l=>(g(),L($,{key:l.value,header:l.value},{default:c(()=>[i(P,{value:l.permissions,stripedRows:"",class:"p-datatable-sm",loading:p.value,dataKey:"id",scrollable:"",scrollHeight:"flex"},{empty:c(()=>[Z]),default:c(()=>[i(u,{header:a(e)("permissions.columns.id"),field:"id",sortable:"",style:{width:"80px"}},null,8,["header"]),i(u,{header:a(e)("permissions.columns.name"),field:"name",sortable:""},{body:c(({data:m})=>[i(U,{value:m.translated_name,severity:m.name.includes("delete")?"danger":m.name.includes("edit")?"warning":m.name.includes("create")?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),i(u,{header:a(e)("permissions.columns.description"),field:"description"},{body:c(({data:m})=>[M(_(m.description||a(e)("permissions.no_description")),1)]),_:1},8,["header"]),i(u,{header:a(e)("permissions.columns.actions"),style:{width:"100px"}},{body:c(({data:m})=>[V(i(d,{icon:"pi pi-pencil",class:"p-detail",onClick:de=>N(m)},null,8,["onClick"]),[[T,"edit permissions"]])]),_:1},8,["header"])]),_:2},1032,["value","loading"])]),_:2},1032,["header"]))),128))]),_:1},8,["activeIndex"]),i(E,{visible:f.value,"onUpdate:visible":s[5]||(s[5]=l=>f.value=l),header:a(e)("permissions.dialog.title"),style:{width:"50vw"},breakpoints:{"960px":"75vw","640px":"90vw"}},{footer:c(()=>[i(d,{label:a(e)("permissions.dialog.cancel"),icon:"pi pi-times",onClick:s[4]||(s[4]=l=>f.value=!1),class:"p-button-text"},null,8,["label"]),i(d,{label:a(e)("permissions.dialog.save"),icon:"pi pi-check",onClick:B,loading:p.value,autofocus:""},null,8,["label","loading"])]),default:c(()=>[n("div",ee,[n("div",se,[n("label",ae,_(a(e)("permissions.dialog.name")),1),i(w,{id:"permissionName",modelValue:t.value.name,"onUpdate:modelValue":s[1]||(s[1]=l=>t.value.name=l),disabled:""},null,8,["modelValue"])]),n("div",oe,[n("label",ie,_(a(e)("permissions.dialog.translated_name")),1),i(w,{id:"translatedName",modelValue:t.value.translated_name,"onUpdate:modelValue":s[2]||(s[2]=l=>t.value.translated_name=l),placeholder:a(e)("permissions.dialog.translated_name")},null,8,["modelValue","placeholder"])]),n("div",le,[n("label",ne,_(a(e)("permissions.dialog.description")),1),i(z,{id:"description",modelValue:t.value.description,"onUpdate:modelValue":s[3]||(s[3]=l=>t.value.description=l),rows:"5",autoResize:"",placeholder:a(e)("permissions.dialog.description")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"])])],2)),[[T,"list permissions"]])}}},ce=j(te,[["__scopeId","data-v-4d640f64"]]);export{ce as default};
