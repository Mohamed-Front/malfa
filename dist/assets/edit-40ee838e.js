import{_ as Y,x as R,v as Z,u as ee,f as ae,g as te,r as u,o as se,h,i as oe,b as d,c as i,l as le,e as _,k as A,A as y,F as ne,a as C,j as e,t as F,B as M,n as G,D as re,q as de,s as ie,p as w}from"./index-b0afc975.js";const l=f=>(de("data-v-634dd4e9"),f=f(),ie(),f),ce={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ue=l(()=>e("h1",{class:"text-3xl font-bold text-center mb-8 text-gray-800"},"Edit Model",-1)),pe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},me={class:"space-y-2"},_e=l(()=>e("label",{for:"name_en",class:"block text-sm font-medium text-gray-700"},[w(" English Name "),e("span",{class:"text-red-500"},"*")],-1)),ge={key:0,class:"text-red-500 text-xs"},ve={class:"space-y-2"},be=l(()=>e("label",{for:"name_ar",class:"block text-sm font-medium text-gray-700"},[w(" Arabic Name "),e("span",{class:"text-red-500"},"*")],-1)),he={key:0,class:"text-red-500 text-xs"},fe={class:"space-y-2"},xe=l(()=>e("label",{for:"brand_id",class:"block text-sm font-medium text-gray-700"},[w(" Brand "),e("span",{class:"text-red-500"},"*")],-1)),ye={key:0,class:"text-red-500 text-xs"},we={class:"md:col-span-2 space-y-2"},ke=l(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Model Image",-1)),De={class:"flex justify-center"},Ve=["onDragover","onDrop"],Ie={key:0,class:"p-4"},Ce={class:"relative group"},Fe=["src"],Me={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Se={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Ue=["onClick"],je=l(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),Be=[je],Te={class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition cursor-pointer"},Ee=l(()=>e("i",{class:"pi pi-pencil text-sm"},null,-1)),Le=l(()=>e("p",{class:"mt-2 text-center text-sm text-gray-500"},"Click or drag to change image",-1)),Ne={key:1,class:"p-8 flex flex-col items-center justify-center"},Pe=l(()=>e("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[e("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),Re=l(()=>e("p",{class:"text-sm text-center text-gray-600 mb-1"},[e("span",{class:"text-blue-500 font-medium"},"Click to upload"),w(" or drag and drop ")],-1)),Ae=l(()=>e("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 2MB)",-1)),Ge=[Pe,Re,Ae],$e={class:"pt-4 flex justify-center space-x-4"},qe={key:0},ze={key:1,class:"pi pi-spinner pi-spin"},Je={setup(f){const $=R(()=>localStorage.getItem("appLang")||"en"),q=R(()=>$.value==="en"?"name_en":"name_ar"),z=Z(),S=ee(),k=ae(),{t:D}=te(),p=u(),n=u(!1),x=u(null),v=u(null),b=u(!1),U=u(z.params.id),j=u([]),o=u({name_en:"",name_ar:"",brand_id:null,image:null}),J=async()=>{var t,a,s,r,c;try{n.value=!0;const[m,I]=await Promise.all([C.get(`/api/model/${U.value}`),C.get("/api/brand")]);o.value=m.data.data,j.value=I.data.data.data,v.value=(s=(a=(t=m.data)==null?void 0:t.data)==null?void 0:a.media[0])==null?void 0:s.url,n.value=!1}catch(m){console.error("Error fetching data:",m),k.add({severity:"error",summary:D("error"),detail:((c=(r=m.response)==null?void 0:r.data)==null?void 0:c.message)||"Failed to fetch data",life:3e3}),n.value=!1}};se(()=>{J()});const O=t=>{t.preventDefault(),b.value=!0},H=()=>{b.value=!1},K=t=>{x.value=t;const a=new FileReader;a.onload=s=>{v.value=s.target.result},a.readAsDataURL(t),b.value=!1},V=t=>{var s,r,c;const a=((s=t.target.files)==null?void 0:s[0])||((c=(r=t.dataTransfer)==null?void 0:r.files)==null?void 0:c[0]);a&&a.type.match("image.*")&&K(a)},Q=()=>{x.value=null,v.value=null,o.value.image=null},W=async()=>{n.value=!0;const t=new FormData;t.append("name_en",o.value.name_en),t.append("name_ar",o.value.name_ar),t.append("brand_id",o.value.brand_id),t.append("_method","PUT"),x.value?t.append("image",x.value):o.value.image===null&&t.append("remove_image","true"),C.post(`/api/model/${U.value}`,t).then(a=>{S.push({name:"model"}),k.add({severity:"success",summary:D("success"),detail:"Model updated successfully",life:3e3}),n.value=!1}).catch(a=>{var s,r;console.error("Error:",a),k.add({severity:"error",summary:D("error"),detail:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"An error occurred",life:3e3}),n.value=!1})};return(t,a)=>{const s=h("InputText"),r=h("Dropdown"),c=h("Button"),m=h("Form"),I=h("Toast"),X=oe("can");return d(),i(ne,null,[le((d(),i("div",ce,[ue,_(m,{ref_key:"form",ref:p,onSubmit:y(W,["prevent"]),class:"space-y-6"},{default:A(()=>{var B,T,E,L,N,P;return[e("div",pe,[e("div",me,[_e,_(s,{id:"name_en",modelValue:o.value.name_en,"onUpdate:modelValue":a[0]||(a[0]=g=>o.value.name_en=g),placeholder:"Enter model name in English",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(T=(B=p.value)==null?void 0:B.errors)!=null&&T.name_en?(d(),i("small",ge,F(p.value.errors.name_en[0]),1)):M("",!0)]),e("div",ve,[be,_(s,{id:"name_ar",modelValue:o.value.name_ar,"onUpdate:modelValue":a[1]||(a[1]=g=>o.value.name_ar=g),placeholder:"أدخل اسم الموديل بالعربية",dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(L=(E=p.value)==null?void 0:E.errors)!=null&&L.name_ar?(d(),i("small",he,F(p.value.errors.name_ar[0]),1)):M("",!0)]),e("div",fe,[xe,_(r,{id:"brand_id",modelValue:o.value.brand_id,"onUpdate:modelValue":a[2]||(a[2]=g=>o.value.brand_id=g),options:j.value,optionLabel:G(q),optionValue:"id",placeholder:"Select a brand",class:"w-full"},null,8,["modelValue","options","optionLabel"]),(P=(N=p.value)==null?void 0:N.errors)!=null&&P.brand_id?(d(),i("small",ye,F(p.value.errors.brand_id[0]),1)):M("",!0)]),e("div",we,[ke,e("div",De,[e("label",{onDragover:y(O,["prevent"]),onDragleave:H,onDrop:y(V,["prevent"]),class:re([{"border-blue-500 bg-blue-50":b.value,"border-gray-300":!b.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[e("input",{type:"file",onChange:V,accept:"image/*",class:"hidden"},null,32),v.value?(d(),i("div",Ie,[e("div",Ce,[e("img",{src:v.value,alt:"Preview",class:"w-full h-64 object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Fe),e("div",Me,[e("div",Se,[e("button",{type:"button",onClick:y(Q,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Be,8,Ue),e("label",Te,[Ee,e("input",{type:"file",onChange:V,accept:"image/*",class:"hidden"},null,32)])])])]),Le])):(d(),i("div",Ne,Ge))],42,Ve)])])]),e("div",$e,[_(c,{type:"button",label:"Cancel",icon:"pi pi-times",onClick:a[3]||(a[3]=g=>G(S).go(-1)),class:"px-6 mx-2 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:n.value},null,8,["disabled"]),_(c,{type:"submit",label:"Update Model",icon:"pi pi-check",loading:n.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:n.value},{default:A(()=>[n.value?(d(),i("i",ze)):(d(),i("span",qe,"Update Model"))]),_:1},8,["loading","disabled"])])]}),_:1},8,["onSubmit"])])),[[X,"edit models"]]),_(I)],64)}}},He=Y(Je,[["__scopeId","data-v-634dd4e9"]]);export{He as default};
