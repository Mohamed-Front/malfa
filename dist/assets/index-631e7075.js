import{p as pe,y as me,z as ve,r as o,A as _e,B as fe,o as ge,d,C as be,e as p,f as _,h as l,i as s,w as n,D as he,b as U,E as w,q as ye,t as m,m as J,F as K,k as we,G as Ce,n as ke,s as xe,v as Ve}from"./index-cc239839.js";const c=C=>(xe("data-v-981b5285"),C=C(),Ve(),C),De={class:"grid"},Se={class:"col-12"},Ue={class:"my-2"},$e={class:"my-2 flex gap-2"},Pe={class:"p-input-icon-left"},Ne=c(()=>l("i",{class:"pi pi-search"},null,-1)),Te={class:"flex flex-column md:flex-row md:justify-between md:align-items-center"},Ee={class:"m-0"},Me={class:"p-paginator p-component p-unselectable-text mt-3"},Be={class:"p-paginator-left-content"},Ie={class:"p-paginator-current"},Re={class:"p-paginator-right-content"},Fe={class:"p-paginator-pages"},je=["disabled"],qe=c(()=>l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),ze=[qe],Ae=["disabled"],Le=c(()=>l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Ge=[Le],Oe=["onClick"],Qe={key:1,class:"p-paginator-dots"},Ye=["disabled"],He=c(()=>l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),Je=[He],Ke=["disabled"],We=c(()=>l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),Xe=[We],Ze={class:"p-paginator-rpp-options"},et=c(()=>l("div",{class:"flex align-items-center justify-content-center"},[l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),l("span",null,"Are you sure you want to delete this role?")],-1)),tt={class:"field mb-5"},at=c(()=>l("label",{for:"name"},"Name",-1)),lt={class:"card flex justify-content-center"},ot={class:"field mb-5"},st=c(()=>l("label",{for:"name"},"Name",-1)),nt={class:"card flex justify-content-center"},it={setup(C){const M=me(),f=ve(),k=o(!0),i=o({name:"",permissions:[]}),$=o([]),B=o([]),P=o(!1),x=o(!1);o(!1);const g=o(!1);o({});const I=o(null),R=o(null),F=o({}),j=o(!1),q=o(Number),V=o(""),u=o(1),z=o(0),b=o(10),D=o(0),W=o(""),X=o(""),A=o(""),L=o(""),G=o(0),O=o(0),Q=o([]),Z=()=>{F.value={global:{value:null,matchMode:he.CONTAINS}}},v=()=>{k.value=!0,U.get("/api/role",{params:{page:u.value,limit:b.value,search:V.value}}).then(e=>{k.value=!1,B.value=e.data.data.data,z.value=e.data.data.total,D.value=e.data.data.last_page,W.value=e.data.data.first_page_url,X.value=e.data.data.last_page_url,A.value=e.data.data.next_page_url,L.value=e.data.data.prev_page_url,G.value=e.data.data.from,O.value=e.data.data.to,Q.value=e.data.data.links}).catch(e=>{k.value=!1,console.error("Error fetching roles:",e),f.add({severity:"error",summary:"Error",detail:"Failed to load roles",life:3e3})}),U.get("/api/role/get/permissions").then(e=>{$.value=e.data.permissions}).catch(e=>{console.error("Error fetching permissions:",e)})},h=e=>{e>=1&&e<=D.value&&(u.value=e,v())},ee=e=>{b.value=e.value,u.value=1,v()};_e(V,e=>{u.value=1,v()});const te=()=>{M.push({name:"roles-create"})},Y=()=>{x.value=!1,P.value=!1,j.value=!1},ae=()=>{j.value=!0,U.post("api/roles/create",i.value).then(e=>{v(),x.value=!1,f.add({severity:"success",summary:"Successful",detail:"Role Created",life:3e3}),i.value={name:"",permissions:[]}}).catch(e=>{console.error("Error creating role:",e),f.add({severity:"error",summary:"Error",detail:"Failed to create role",life:3e3})})},le=e=>{M.push({name:"roles-update",params:{id:e}})},oe=e=>{q.value=e,g.value=!0},se=()=>{U.delete(`api/role/${q.value}`).then(()=>{v(),g.value=!1,f.add({severity:"success",summary:"Successful",detail:"Role Deleted",life:3e3})}).catch(e=>{console.error("Error deleting role:",e),f.add({severity:"error",summary:"Error",detail:"Failed to delete role",life:3e3})})},ne=()=>{R.value.exportCSV()};return fe(()=>{Z()}),ge(()=>{v()}),(e,a)=>{const r=d("Button"),N=d("InputText"),ie=d("Toolbar"),re=d("Toast"),S=d("Column"),de=d("DataTable"),ue=d("Dropdown"),T=d("Dialog"),H=d("MultiSelect"),ce=d("va-card"),y=be("can");return p(),_("div",De,[l("div",Se,[s(ce,{class:"card"},{default:n(()=>[s(ie,{class:"mb-4"},{start:n(()=>[l("div",Ue,[w(s(r,{label:e.$t("user.new"),icon:"pi pi-plus",class:"new mr-2",onClick:te},null,8,["label"]),[[y,"create roles"]])])]),end:n(()=>[w((p(),_("div",$e,[l("span",Pe,[Ne,s(N,{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=t=>V.value=t),placeholder:e.$t("user.search")},null,8,["modelValue","placeholder"])]),s(r,{label:e.$t("user.export"),icon:"pi pi-upload",class:"new",onClick:a[1]||(a[1]=t=>ne())},null,8,["label"])])),[[y,"list roles"]])]),_:1}),s(re),w((p(),ye(de,{ref_key:"dt",ref:R,selection:I.value,"onUpdate:selection":a[2]||(a[2]=t=>I.value=t),value:B.value,loading:k.value,"data-key":"id",paginator:!1,rows:b.value,filters:F.value,"responsive-layout":"scroll"},{header:n(()=>[l("div",Te,[l("h5",Ee,m(e.$t("role.manage_Roles")),1)])]),default:n(()=>[s(S,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(S,{field:"id",header:e.$t("role.iD"),sortable:!0,"header-style":"width:14%; min-width:5rem;"},{body:n(t=>[J(m(t.data.id),1)]),_:1},8,["header"]),s(S,{field:"name",header:e.$t("role.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(t=>[J(m(t.data.name),1)]),_:1},8,["header"]),s(S,{"header-style":"min-width:17rem;"},{body:n(t=>[w(s(r,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:E=>le(t.data.id)},null,8,["onClick"]),[[y,"edit roles"]]),w(s(r,{icon:"pi pi-trash",class:"delete mt-2",onClick:E=>oe(t.data.id)},null,8,["onClick"]),[[y,"delete roles"]])]),_:1})]),_:1},8,["selection","value","loading","rows","filters"])),[[y,"list roles"]]),l("div",Me,[l("div",Be,[l("span",Ie," Showing "+m(G.value)+" to "+m(O.value)+" of "+m(z.value)+" entries ",1)]),l("div",Re,[l("span",Fe,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:a[3]||(a[3]=t=>h(1))},ze,8,je),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!L.value,onClick:a[4]||(a[4]=t=>h(u.value-1))},Ge,8,Ae),(p(!0),_(K,null,we(Q.value,(t,E)=>(p(),_(K,{key:E},[t.label&&!isNaN(t.label)?(p(),_("button",{key:0,class:Ce(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:rt=>h(parseInt(t.label))},m(t.label),11,Oe)):t.label==="..."?(p(),_("span",Qe,"...")):ke("",!0)],64))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!A.value,onClick:a[5]||(a[5]=t=>h(u.value+1))},Je,8,Ye),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===D.value,onClick:a[6]||(a[6]=t=>h(D.value))},Xe,8,Ke)]),l("span",Ze,[s(ue,{modelValue:b.value,"onUpdate:modelValue":a[7]||(a[7]=t=>b.value=t),options:[5,10,20,30],onChange:ee,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])]),s(T,{visible:g.value,"onUpdate:visible":a[9]||(a[9]=t=>g.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[s(r,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[8]||(a[8]=t=>g.value=!1)}),s(r,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:se})]),default:n(()=>[et]),_:1},8,["visible"]),s(T,{visible:x.value,"onUpdate:visible":a[12]||(a[12]=t=>x.value=t),style:{width:"450px"},header:"Create Role",modal:!0,class:"p-fluid"},{footer:n(()=>[s(r,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:Y}),s(r,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:ae})]),default:n(()=>[l("div",tt,[at,s(N,{class:"mt-3 w-full",id:"name",modelValue:i.value.name,"onUpdate:modelValue":a[10]||(a[10]=t=>i.value.name=t),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue"])]),l("div",lt,[s(H,{modelValue:i.value.permissions,"onUpdate:modelValue":a[11]||(a[11]=t=>i.value.permissions=t),display:"chip","option-value":"id",options:$.value,optionLabel:"name",placeholder:"Select Permissions",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"]),s(T,{visible:P.value,"onUpdate:visible":a[15]||(a[15]=t=>P.value=t),style:{width:"450px"},header:"Update Role",modal:!0},{footer:n(()=>[s(r,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:Y}),s(r,{label:"Update",icon:"pi pi-check",class:"p-button-text",onClick:e.update},null,8,["onClick"])]),default:n(()=>[l("div",ot,[st,s(N,{class:"mt-3 w-full",id:"name",modelValue:i.value.name,"onUpdate:modelValue":a[13]||(a[13]=t=>i.value.name=t),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue"])]),l("div",nt,[s(H,{modelValue:i.value.permissions,"onUpdate:modelValue":a[14]||(a[14]=t=>i.value.permissions=t),"option-value":"id",options:$.value,optionLabel:"name",placeholder:"Select Permissions",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"])]),_:1})])])}}},ut=pe(it,[["__scopeId","data-v-981b5285"]]);export{ut as default};
