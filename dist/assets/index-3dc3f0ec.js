import{_ as ne,u as ie,f as de,r as s,g as ce,w as re,o as ue,h as i,i as pe,b as c,c as r,j as a,e as l,k as n,F as _e,a as R,l as y,m as ve,t as v,p as Y,q as me,s as he,v as z,x as ge,y as fe}from"./index-db4827c8.js";const u=w=>(ge("data-v-8dfd319e"),w=w(),fe(),w),be={class:"grid"},ye={class:"col-12"},we={class:"my-2"},ke={class:"my-2 flex gap-2"},xe={class:"p-input-icon-left"},Ce=u(()=>a("i",{class:"pi pi-search"},null,-1)),Se=u(()=>a("div",{class:"flex flex-column md:flex-row md:justify-between md:align-items-center"},[a("h5",{class:"m-0 my-auto px-2"},"Stores")],-1)),Ne={class:"font-medium"},De={class:"font-medium"},Te={class:"p-paginator p-component p-unselectable-text mt-3"},Ve={class:"p-paginator-left-content"},$e={class:"p-paginator-current"},Ie={class:"p-paginator-right-content"},Pe={class:"p-paginator-pages"},Ue=["disabled"],Be=u(()=>a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),Me=[Be],Ee=["disabled"],Fe=u(()=>a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),je=[Fe],Re=["onClick"],Ye={key:1,class:"p-paginator-dots"},ze=["disabled"],Ae=u(()=>a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),qe=[Ae],He=["disabled"],Le=u(()=>a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),Oe=[Le],Qe={class:"p-paginator-rpp-options"},Ge={class:"flex align-items-center justify-content-center"},Je=u(()=>a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ke={key:0},We={setup(w){const N=ie(),A=de(),k=s(!0),D=s(""),q=s({}),T=s(null);s(!1),s(!1);const m=s(!1),V=s(null),$=s(null),I=s({}),x=s(""),d=s(1),P=s(0),h=s(10),C=s(0),H=s(""),L=s(""),U=s(""),B=s(""),M=s(0),E=s(0),F=s([]),O=()=>{$.value.exportCSV()},Q=t=>{D.value=t,m.value=!0},G=()=>{R.delete(`/api/store/${D.value}`).then(()=>{g(),m.value=!1,A.add({severity:"success",summary:"Successful",detail:"Store Deleted",life:3e3})})},J=()=>{I.value={global:{value:null,matchMode:_e.CONTAINS}}};ce(()=>{J()});const g=()=>{k.value=!0,R.get("/api/store",{params:{page:d.value,limit:h.value,search:x.value}}).then(t=>{k.value=!1,T.value=t.data.data.data,P.value=t.data.data.total,C.value=t.data.data.last_page,H.value=t.data.data.first_page_url,L.value=t.data.data.last_page_url,U.value=t.data.data.next_page_url,B.value=t.data.data.prev_page_url,M.value=t.data.data.from,E.value=t.data.data.to,F.value=t.data.data.links}).catch(t=>{k.value=!1,console.error("Error fetching data:",t)})};re(x,t=>{d.value=1,g()});const f=t=>{t>=1&&t<=C.value&&(d.value=t,g())},K=t=>{h.value=t.value,d.value=1,g()};ue(()=>{g()});const W=()=>{N.push({name:"store-create"})},X=t=>{N.push({name:"store-edit",params:{id:t}})};return(t,o)=>{const p=i("Button"),Z=i("InputText"),ee=i("Toolbar"),te=i("Toast"),_=i("Column"),j=i("Tag"),ae=i("DataTable"),se=i("Dropdown"),oe=i("Dialog"),le=i("va-card"),b=pe("can");return c(),r("div",be,[a("div",ye,[l(le,{class:"card"},{default:n(()=>[l(ee,{class:"mb-4"},{start:n(()=>[a("div",we,[y(l(p,{label:"New",icon:"pi pi-plus",class:"new mr-2",onClick:W},null,512),[[b,"create stores"]])])]),end:n(()=>[y((c(),r("div",ke,[a("span",xe,[Ce,l(Z,{modelValue:x.value,"onUpdate:modelValue":o[0]||(o[0]=e=>x.value=e),placeholder:"Search..."},null,8,["modelValue"])]),l(p,{label:"Export",icon:"pi pi-upload",class:"new",onClick:o[1]||(o[1]=e=>O())})])),[[b,"list stores"]])]),_:1}),l(te),y((c(),ve(ae,{ref_key:"dt",ref:$,selection:V.value,"onUpdate:selection":o[2]||(o[2]=e=>V.value=e),value:T.value,loading:k.value,"data-key":"id",paginator:!1,rows:h.value,filters:I.value,"responsive-layout":"scroll"},{header:n(()=>[Se]),default:n(()=>[l(_,{"selection-mode":"multiple","header-style":"width: 3rem"}),l(_,{field:"name_en",header:"Name (en)",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(e=>[a("span",Ne,v(e.data.name_en),1)]),_:1}),l(_,{field:"name_ar",header:"Name (ar)",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(e=>[a("span",De,v(e.data.name_ar),1)]),_:1}),l(_,{field:"is_default",header:"Default",sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:n(e=>[l(j,{value:e.data.is_default?"Yes":"No",severity:e.data.is_default?"success":"info"},null,8,["value","severity"])]),_:1}),l(_,{field:"has_market",header:"Has Market",sortable:!0,"header-style":"width:12%; min-width:8rem;"},{body:n(e=>[l(j,{value:e.data.has_market?"Yes":"No",severity:e.data.has_market?"success":"info"},null,8,["value","severity"])]),_:1}),l(_,{"header-style":"min-width:10rem;"},{body:n(e=>[y(l(p,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:S=>X(e.data.id)},null,8,["onClick"]),[[b,"edit stores"]]),y(l(p,{icon:"pi pi-trash",class:"delete mt-2",onClick:S=>Q(e.data.id)},null,8,["onClick"]),[[b,"delete stores"]])]),_:1})]),_:1},8,["selection","value","loading","rows","filters"])),[[b,"list stores"]]),a("div",Te,[a("div",Ve,[a("span",$e,"Showing "+v(M.value)+" to "+v(E.value)+" of "+v(P.value)+" entries",1)]),a("div",Ie,[a("span",Pe,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:d.value===1,onClick:o[3]||(o[3]=e=>f(1))},Me,8,Ue),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!B.value,onClick:o[4]||(o[4]=e=>f(d.value-1))},je,8,Ee),(c(!0),r(Y,null,me(F.value,(e,S)=>(c(),r(Y,{key:S},[e.label&&!isNaN(e.label)?(c(),r("button",{key:0,class:he(["p-paginator-page p-paginator-element p-link",{"p-highlight":e.active}]),onClick:Xe=>f(parseInt(e.label))},v(e.label),11,Re)):e.label==="..."?(c(),r("span",Ye,"...")):z("",!0)],64))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!U.value,onClick:o[5]||(o[5]=e=>f(d.value+1))},qe,8,ze),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:d.value===C.value,onClick:o[6]||(o[6]=e=>f(C.value))},Oe,8,He)]),a("span",Qe,[l(se,{modelValue:h.value,"onUpdate:modelValue":o[7]||(o[7]=e=>h.value=e),options:[5,10,20,30],onChange:K,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])]),l(oe,{visible:m.value,"onUpdate:visible":o[9]||(o[9]=e=>m.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[l(p,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:o[8]||(o[8]=e=>m.value=!1)}),l(p,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:G})]),default:n(()=>[a("div",Ge,[Je,q.value?(c(),r("span",Ke,"Are you sure you want to delete the selected store?")):z("",!0)])]),_:1},8,["visible"])]),_:1})])])}}},et=ne(We,[["__scopeId","data-v-8dfd319e"]]);export{et as default};
