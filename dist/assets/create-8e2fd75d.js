import{_ as E,u as F,r as c,o as R,i as T,l as m,b as a,c as i,j as e,t as r,q as V,z as x,F as p,A as y,B as j,C as M,a as P,D as U,s as z,v as L}from"./index-54e2407f.js";const $=b=>(z("data-v-bb6f8f15"),b=b(),L(),b),O={class:"permission-manager"},H={class:"controls"},J={class:"name-input"},K={for:"roleName"},N=$(()=>e("span",{class:"required"},"*",-1)),Q=["placeholder"],W={class:"name-input"},X={for:"roleName"},Y=$(()=>e("span",{class:"required"},"*",-1)),Z=["placeholder"],ee={key:0,class:"loading"},te={key:0,class:"table-view"},se=$(()=>e("thead",null,[e("tr",null,[e("th",null,"Group"),e("th",null,"Permission"),e("th",null,"Description"),e("th",null,"Select")])],-1)),le=["rowspan"],oe=["id","checked",".indeterminate","onChange"],ne=["for"],ae=["onClick","disabled"],ie=["id","value"],de={key:1,class:"card-view"},re={class:"permission-groups"},ce={class:"group-header"},ue=["id","checked",".indeterminate","onChange"],_e=["for"],ve={class:"permission-items"},pe={class:"permission-info"},he=["id","value"],me=["for"],be=["onClick","disabled"],fe=["disabled"],ke={class:"modal-content"},ye={setup(b){const q=F(),_=c({}),g=c(!0),d=c([]),f=c(""),h=c(""),k=c(!1),C=c(""),A=c(!1),B=()=>{P.get("api/role/get/permissions").then(l=>{_.value=l.data.data,g.value=!1})},w=(l,s)=>{const n=(_.value[l]||[]).map(t=>t.id);s.target.checked?d.value=[...new Set([...d.value,...n])]:d.value=d.value.filter(t=>!n.includes(t))},D=l=>{const s=_.value[l]||[];return s.length===0?!1:s.every(v=>d.value.includes(v.id))},I=l=>{const s=_.value[l]||[];if(s.length===0)return!1;const v=s.some(t=>d.value.includes(t.id)),n=s.every(t=>d.value.includes(t.id));return v&&!n},S=l=>{C.value=l||"No description available",k.value=!0},G=()=>{if(!h.value){alert("Please enter a role name");return}const l={name_ar:h.value,name_en:f.value,permissions:d.value};P.post("/api/role",l).then(s=>{q.push({name:"roles"})}).catch(s=>{console.error("Error:",s)})};return R(()=>{B()}),(l,s)=>{const v=T("can");return m((a(),i("div",O,[e("h1",null,r(l.$t("role.role_Permissions_Manager")),1),e("div",H,[e("div",J,[e("label",K,[V(r(l.$t("role.role_Name_ar")),1),N]),m(e("input",{type:"text",id:"roleName","onUpdate:modelValue":s[0]||(s[0]=n=>h.value=n),placeholder:l.$t("role.role_Name_ar"),required:""},null,8,Q),[[x,h.value]])]),e("div",W,[e("label",X,[V(r(l.$t("role.role_Name_en")),1),Y]),m(e("input",{type:"text",id:"roleName","onUpdate:modelValue":s[1]||(s[1]=n=>f.value=n),placeholder:l.$t("role.role_Name_en"),required:""},null,8,Z),[[x,f.value]])])]),g.value?(a(),i("div",ee,r(l.$t("role.loading_permissions")),1)):(a(),i(p,{key:1},[A.value?(a(),i("div",te,[e("table",null,[se,e("tbody",null,[(a(!0),i(p,null,y(_.value,(n,t)=>(a(),i(p,{key:t},[(a(!0),i(p,null,y(n,o=>(a(),i("tr",{key:o.id},[n.indexOf(o)===0?(a(),i("td",{key:0,rowspan:n.length},[e("input",{class:"mx-2 my-auto",type:"checkbox",id:`group-${t}-table`,checked:D(t),".indeterminate":I(t),onChange:u=>w(t,u)},null,40,oe),e("label",{for:`group-${t}-table`},r(t.charAt(0).toUpperCase()+t.slice(1)),9,ne)],8,le)):M("",!0),e("td",null,r(o.translated_name),1),e("td",null,[e("button",{onClick:u=>S(o.description),class:"description-btn",disabled:!o.description},r(o.description?"View":"None"),9,ae)]),e("td",null,[m(e("input",{class:"mx-2 my-auto",type:"checkbox",id:`permission-${o.id}-table`,value:o.id,"onUpdate:modelValue":s[2]||(s[2]=u=>d.value=u)},null,8,ie),[[U,d.value]])])]))),128))],64))),128))])])])):(a(),i("div",de,[e("div",re,[(a(!0),i(p,null,y(_.value,(n,t)=>(a(),i("div",{key:t,class:"permission-group"},[e("div",ce,[e("input",{class:"mx-2 my-auto",type:"checkbox",id:`group-${t}`,checked:D(t),".indeterminate":I(t),onChange:o=>w(t,o)},null,40,ue),e("label",{for:`group-${t}`},r(t.charAt(0).toUpperCase()+t.slice(1)),9,_e)]),e("div",ve,[(a(!0),i(p,null,y(n,o=>(a(),i("div",{key:o.id,class:"permission-item"},[e("div",pe,[m(e("input",{type:"checkbox",id:`permission-${o.id}`,value:o.id,"onUpdate:modelValue":s[3]||(s[3]=u=>d.value=u)},null,8,he),[[U,d.value]]),e("label",{for:`permission-${o.id}`},r(o.translated_name),9,me)]),e("button",{onClick:u=>S(o.description),class:"description-btn",disabled:!o.description},r(o.description?"View Description":l.$t("role.No_Description")),9,be)]))),128))])]))),128))])]))],64)),e("button",{onClick:G,class:"submit-btn",disabled:d.value.length===0||!f.value||!h.value},r(l.$t("role.create_Role_with_Selected_Permissions")),9,fe),k.value?(a(),i("div",{key:2,class:"modal-overlay",onClick:s[5]||(s[5]=j(n=>k.value=!1,["self"]))},[e("div",ke,[e("h3",null,r(l.$t("role.permission_Description")),1),e("p",null,r(C.value),1),e("button",{onClick:s[4]||(s[4]=n=>k.value=!1),class:"close-modal"},"Close")])])):M("",!0)])),[[v,"create roles"]])}}},ge=E(ye,[["__scopeId","data-v-bb6f8f15"]]);export{ge as default};
