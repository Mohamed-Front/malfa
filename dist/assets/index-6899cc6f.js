import{_ as J,u as K,f as O,g as X,r,w as Y,o as Z,h as i,i as V,b as $,c as ee,j as l,e as a,k as n,l as g,m as te,n as t,p as ae,a as B,t as c,q as b,s as oe,v as le}from"./index-7498dde3.js";const k=m=>(oe("data-v-8a4b21e0"),m=m(),le(),m),se={class:"col-12"},re={class:"card p-4 shadow-2 border-round"},ne={class:"text-2xl font-bold"},ie={class:"flex gap-2"},ce={class:"p-input-icon-left"},de=k(()=>l("i",{class:"pi pi-search"},null,-1)),pe={class:"card shadow-1 surface-0"},ue={class:"text-center py-4"},_e=k(()=>l("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),me={class:"text-xl"},ve={class:"flex justify-content-center align-items-center py-4"},he={class:"flex align-items-center justify-content-center"},fe=k(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),ge={setup(m){const C=K(),x=O(),{t:e}=X(),v=r(!0),P=r([]),_=r(!1),D=r(null),T=r(null),L=r({}),h=r("");r(null);const R=r(1),S=r(0),y=r(10),N=r(0),w=()=>{v.value=!0,B.get("/api/role",{params:{page:R.value,per_page:y.value,search:h.value||void 0}}).then(s=>{P.value=s.data.data.data,S.value=s.data.data.total,N.value=s.data.data.last_page,v.value=!1}).catch(s=>{x.add({severity:"error",summary:e("error"),detail:e("role.loadError"),life:3e3}),v.value=!1,console.error("Error fetching roles:",s)})};Y([R,y,h],()=>{w()});const E=s=>{D.value=s,_.value=!0},j=()=>{B.delete(`/api/role/${D.value}`).then(()=>{x.add({severity:"success",summary:e("success"),detail:e("role.deleteSuccess"),life:3e3}),w(),_.value=!1}).catch(s=>{x.add({severity:"error",summary:e("error"),detail:e("role.deleteError"),life:3e3})})},z=()=>{T.value.exportCSV()},M=()=>{C.push({name:"roles-create"})},U=s=>{C.push({name:"roles-update",params:{id:s}})};return Z(()=>{w()}),(s,d)=>{const q=i("InputText"),p=i("Button"),A=i("Toolbar"),F=i("Toast"),u=i("Column"),G=i("ProgressSpinner"),Q=i("DataTable"),W=i("Dialog"),f=V("can"),I=V("tooltip");return $(),ee("div",{class:ae(["grid",{rtl:s.$i18n.locale==="ar"}])},[l("div",se,[l("div",re,[a(A,{class:"mb-4"},{start:n(()=>[l("h2",ne,c(t(e)("role.managementTitle")),1)]),end:n(()=>[l("div",ie,[l("span",ce,[de,a(q,{modelValue:h.value,"onUpdate:modelValue":d[0]||(d[0]=o=>h.value=o),placeholder:t(e)("role.search")},null,8,["modelValue","placeholder"])]),a(p,{label:t(e)("role.export"),icon:"pi pi-upload",class:"p-export",onClick:z},null,8,["label"]),g(a(p,{label:t(e)("role.new"),icon:"pi pi-plus",class:"p-button-success",onClick:M},null,8,["label"]),[[f,"create roles"]])])]),_:1}),a(F),l("div",pe,[g(($(),te(Q,{ref_key:"dt",ref:T,value:P.value,loading:v.value,"data-key":"id",paginator:!0,rows:y.value,filters:L.value,totalRecords:S.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,20,30],"current-page-report-template":`${t(e)("show")} {first} ${t(e)("to")} {last} ${t(e)("from")} {totalRecords}`,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:n(()=>[l("div",ue,[_e,l("p",me,c(t(e)("role.noData")),1)])]),loading:n(()=>[l("div",ve,[a(G,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:n(()=>[a(u,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(u,{field:"id",header:t(e)("role.id"),sortable:!0},{body:n(o=>[b(c(o.data.id),1)]),_:1},8,["header"]),a(u,{field:"name_en",header:t(e)("role.nameEn"),sortable:!0},{body:n(o=>[b(c(o.data.name_en),1)]),_:1},8,["header"]),a(u,{field:"name_ar",header:t(e)("role.nameAr"),sortable:!0},{body:n(o=>[b(c(o.data.name_ar),1)]),_:1},8,["header"]),a(u,{field:"translated_name",header:t(e)("role.translatedName"),sortable:!0},{body:n(o=>[b(c(o.data.translated_name),1)]),_:1},8,["header"]),a(u,{header:t(e)("actions"),headerStyle:"width: 12rem"},{body:n(o=>[g(a(p,{icon:"pi pi-pencil",class:"p-detail mr-2",onClick:H=>U(o.data.id)},null,8,["onClick"]),[[f,"edit roles"],[I,t(e)("edit"),void 0,{top:!0}]]),g(a(p,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:H=>E(o.data.id)},null,8,["onClick"]),[[f,"delete roles"],[I,t(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords","current-page-report-template"])),[[f,"list roles"]])]),a(W,{visible:_.value,"onUpdate:visible":d[2]||(d[2]=o=>_.value=o),style:{width:"450px"},header:t(e)("role.deleteConfirmTitle"),modal:!0},{footer:n(()=>[a(p,{label:t(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:d[1]||(d[1]=o=>_.value=!1)},null,8,["label"]),a(p,{label:t(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:j},null,8,["label"])]),default:n(()=>[l("div",he,[fe,l("span",null,c(t(e)("role.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])],2)}}},xe=J(ge,[["__scopeId","data-v-8a4b21e0"]]);export{xe as default};
