import{_ as B,u as G,r as u,o as q,i as T,l as f,b as i,c as a,j as e,t as r,p as E,y as F,F as p,z as y,A as R,B as x,a as V,C as I,q as j,s as z}from"./index-b0afc975.js";const M=b=>(j("data-v-45427bb7"),b=b(),z(),b),L={class:"permission-manager"},O={class:"controls"},H={class:"name-input"},J={for:"roleName"},K=M(()=>e("span",{class:"required"},"*",-1)),Q=["placeholder"],W={key:0,class:"loading"},X={key:0,class:"table-view"},Y=M(()=>e("thead",null,[e("tr",null,[e("th",null,"Group"),e("th",null,"Permission"),e("th",null,"Description"),e("th",null,"Select")])],-1)),Z=["rowspan"],N=["id","checked",".indeterminate","onChange"],ee=["for"],te=["onClick","disabled"],se=["id","value"],le={key:1,class:"card-view"},oe={class:"permission-groups"},ne={class:"group-header"},ie=["id","checked",".indeterminate","onChange"],ae=["for"],de={class:"permission-items"},re={class:"permission-info"},ce=["id","value"],ue=["for"],ve=["onClick","disabled"],_e=["disabled"],pe={class:"modal-content"},he={setup(b){const P=G(),v=u({}),g=u(!0),d=u([]),h=u(""),m=u(!1),w=u(""),k=u(!1),U=()=>{V.get("api/role/get/permissions").then(o=>{v.value=o.data.data,g.value=!1})},C=(o,s)=>{const n=(v.value[o]||[]).map(t=>t.id);s.target.checked?d.value=[...new Set([...d.value,...n])]:d.value=d.value.filter(t=>!n.includes(t))},$=o=>{const s=v.value[o]||[];return s.length===0?!1:s.every(_=>d.value.includes(_.id))},D=o=>{const s=v.value[o]||[];if(s.length===0)return!1;const _=s.some(t=>d.value.includes(t.id)),n=s.every(t=>d.value.includes(t.id));return _&&!n},S=o=>{w.value=o||"No description available",m.value=!0},A=()=>{if(!h.value){alert("Please enter a role name");return}const o={name:h.value,permissions:d.value};V.post("/api/role",o).then(s=>{P.push({name:"roles"})}).catch(s=>{console.error("Error:",s)})};return q(()=>{U()}),(o,s)=>{const _=T("can");return f((i(),a("div",L,[e("h1",null,r(o.$t("role.role_Permissions_Manager")),1),e("div",O,[e("div",H,[e("label",J,[E(r(o.$t("role.role_Name")),1),K]),f(e("input",{type:"text",id:"roleName","onUpdate:modelValue":s[0]||(s[0]=n=>h.value=n),placeholder:o.$t("role.enter_role_name"),required:""},null,8,Q),[[F,h.value]])]),e("button",{onClick:s[1]||(s[1]=n=>k.value=!k.value),class:"view-toggle"},r(k.value?"Switch to Card View":"Switch to Table View"),1)]),g.value?(i(),a("div",W,r(o.$t("role.loading_permissions")),1)):(i(),a(p,{key:1},[k.value?(i(),a("div",X,[e("table",null,[Y,e("tbody",null,[(i(!0),a(p,null,y(v.value,(n,t)=>(i(),a(p,{key:t},[(i(!0),a(p,null,y(n,l=>(i(),a("tr",{key:l.id},[n.indexOf(l)===0?(i(),a("td",{key:0,rowspan:n.length},[e("input",{class:"mx-2 my-auto",type:"checkbox",id:`group-${t}-table`,checked:$(t),".indeterminate":D(t),onChange:c=>C(t,c)},null,40,N),e("label",{for:`group-${t}-table`},r(t.charAt(0).toUpperCase()+t.slice(1)),9,ee)],8,Z)):x("",!0),e("td",null,r(l.name),1),e("td",null,[e("button",{onClick:c=>S(l.description),class:"description-btn",disabled:!l.description},r(l.description?"View":"None"),9,te)]),e("td",null,[f(e("input",{class:"mx-2 my-auto",type:"checkbox",id:`permission-${l.id}-table`,value:l.id,"onUpdate:modelValue":s[2]||(s[2]=c=>d.value=c)},null,8,se),[[I,d.value]])])]))),128))],64))),128))])])])):(i(),a("div",le,[e("div",oe,[(i(!0),a(p,null,y(v.value,(n,t)=>(i(),a("div",{key:t,class:"permission-group"},[e("div",ne,[e("input",{class:"mx-2 my-auto",type:"checkbox",id:`group-${t}`,checked:$(t),".indeterminate":D(t),onChange:l=>C(t,l)},null,40,ie),e("label",{for:`group-${t}`},r(t.charAt(0).toUpperCase()+t.slice(1)),9,ae)]),e("div",de,[(i(!0),a(p,null,y(n,l=>(i(),a("div",{key:l.id,class:"permission-item"},[e("div",re,[f(e("input",{type:"checkbox",id:`permission-${l.id}`,value:l.id,"onUpdate:modelValue":s[3]||(s[3]=c=>d.value=c)},null,8,ce),[[I,d.value]]),e("label",{for:`permission-${l.id}`},r(l.name),9,ue)]),e("button",{onClick:c=>S(l.description),class:"description-btn",disabled:!l.description},r(l.description?"View Description":"No Description"),9,ve)]))),128))])]))),128))])]))],64)),e("button",{onClick:A,class:"submit-btn",disabled:d.value.length===0||!h.value},r(o.$t("role.create_Role_with_Selected_Permissions")),9,_e),m.value?(i(),a("div",{key:2,class:"modal-overlay",onClick:s[5]||(s[5]=R(n=>m.value=!1,["self"]))},[e("div",pe,[e("h3",null,r(o.$t("role.permission_Description")),1),e("p",null,r(w.value),1),e("button",{onClick:s[4]||(s[4]=n=>m.value=!1),class:"close-modal"},"Close")])])):x("",!0)])),[[_,"create roles"]])}}},me=B(he,[["__scopeId","data-v-45427bb7"]]);export{me as default};
