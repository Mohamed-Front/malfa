import{_ as z,r as u,o as R,h as l,i as j,l as D,b as f,c as w,j as o,e,k as d,a as k,F as A,z as F,m as M,p as q,t as H,q as K,s as L}from"./index-b0afc975.js";const _=v=>(K("data-v-3e5d677e"),v=v(),L(),v),O={class:"permissions-container"},G={class:"card"},J=_(()=>o("div",{class:"header"},[o("h1",null,"Permissions Management"),o("p",{class:"subtitle"},"View and manage all system permissions grouped by modules")],-1)),Q={class:"toolbar"},W={class:"description-cell"},X=_(()=>o("div",{class:"empty-message"},[o("i",{class:"pi pi-database",style:{"font-size":"2rem"}}),o("p",null,"No permissions found in this group")],-1)),Y={class:"p-fluid"},Z={class:"p-field"},ee=_(()=>o("label",{for:"permissionName"},"Permission Name",-1)),se={class:"p-field"},oe=_(()=>o("label",{for:"description"},"Description",-1)),te={setup(v){const C=u({}),h=u([]),c=u(!0),g=u(0),m=u(!1),p=u({id:"",name:"",description:""}),T=t=>{const s=[];for(const[i,r]of Object.entries(t))s.push({name:i.charAt(0).toUpperCase()+i.slice(1),value:i,permissions:r});return s.sort((i,r)=>i.name.localeCompare(r.name)),s},b=()=>{c.value=!0,k.get("api/role/get/permissions").then(t=>{C.value=t.data.data,h.value=T(t.data.data),c.value=!1}).catch(t=>{console.error("Error fetching permissions:",t),c.value=!1})},x=t=>{m.value=!0,p.value={id:t.id,name:t.name,description:t.description||""}},V=()=>{c.value=!0,k.put(`/api/role/permission/${p.value.id}`,{description:p.value.description}).then(()=>{b(),m.value=!1}).catch(t=>{console.error("Update failed:",t)}).finally(()=>{c.value=!1})};return R(()=>{b()}),(t,s)=>{const i=l("Button"),r=l("Column"),I=l("Tag"),N=l("DataTable"),P=l("TabPanel"),U=l("TabView"),B=l("InputText"),S=l("Textarea"),E=l("Dialog"),y=j("can");return D((f(),w("div",O,[o("div",G,[J,o("div",Q,[e(i,{icon:"pi pi-refresh",label:"Refresh",onClick:b,loading:c.value},null,8,["loading"])]),e(U,{activeIndex:g.value,"onUpdate:activeIndex":s[0]||(s[0]=a=>g.value=a),class:"grouped-tabs"},{default:d(()=>[(f(!0),w(A,null,F(h.value,a=>(f(),M(P,{key:a.value,header:a.name},{default:d(()=>[e(N,{value:a.permissions,stripedRows:"",class:"p-datatable-sm",loading:c.value,dataKey:"id",scrollable:"",scrollHeight:"flex"},{empty:d(()=>[X]),default:d(()=>[e(r,{field:"id",header:"ID",sortable:"",style:{width:"80px"}}),e(r,{field:"name",header:"Name",sortable:""},{body:d(({data:n})=>[e(I,{value:n.name,severity:n.name.includes("delete")?"danger":n.name.includes("edit")?"warning":n.name.includes("create")?"success":"info"},null,8,["value","severity"])]),_:1}),e(r,{field:"description",header:"Description"},{body:d(({data:n})=>[o("div",W,[q(H(n.description||"No description")+" ",1),D(e(i,{icon:"pi pi-pencil",class:"p-button-rounded p-button-text p-button-sm",onClick:$=>x(n)},null,8,["onClick"]),[[y,"edit permissions"]])])]),_:1}),e(r,{header:"Actions",style:{width:"100px"}},{body:d(({data:n})=>[e(i,{icon:"pi pi-cog",class:"p-button-rounded p-button-text p-button-sm",onClick:$=>x(n)},null,8,["onClick"])]),_:1})]),_:2},1032,["value","loading"])]),_:2},1032,["header"]))),128))]),_:1},8,["activeIndex"]),e(E,{visible:m.value,"onUpdate:visible":s[4]||(s[4]=a=>m.value=a),modal:"",header:"Update Permission Description",style:{width:"50vw"},breakpoints:{"960px":"75vw","640px":"90vw"}},{footer:d(()=>[e(i,{label:"Cancel",icon:"pi pi-times",onClick:s[3]||(s[3]=a=>m.value=!1),class:"p-button-text"}),e(i,{label:"Save",icon:"pi pi-check",onClick:V,loading:c.value,autofocus:""},null,8,["loading"])]),default:d(()=>[o("div",Y,[o("div",Z,[ee,e(B,{id:"permissionName",modelValue:p.value.name,"onUpdate:modelValue":s[1]||(s[1]=a=>p.value.name=a),disabled:""},null,8,["modelValue"])]),o("div",se,[oe,e(S,{id:"description",modelValue:p.value.description,"onUpdate:modelValue":s[2]||(s[2]=a=>p.value.description=a),rows:"5",autoResize:"",placeholder:"Enter permission description..."},null,8,["modelValue"])])])]),_:1},8,["visible"])])])),[[y,"list permissions"]])}}},ie=z(te,[["__scopeId","data-v-3e5d677e"]]);export{ie as default};
