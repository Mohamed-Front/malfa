import{_ as X,f as Y,u as Z,g as ee,r as _,o as te,h as b,i as se,b as n,c as d,l as oe,j as t,t as a,e as p,k as L,B as k,F as ae,a as D,q as v,C as y,p as le,s as re,v as ne}from"./index-7498dde3.js";const u=x=>(re("data-v-3dc5ef86"),x=x(),ne(),x),de={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ie={class:"text-3xl font-bold text-center mb-8 text-gray-800"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ce={class:"space-y-2"},pe={for:"name",class:"block text-sm font-medium text-gray-700"},me=u(()=>t("span",{class:"text-red-500"},"*",-1)),_e={key:0,class:"text-red-500 text-xs"},ve={class:"space-y-2"},ge={for:"phone",class:"block text-sm font-medium text-gray-700"},he=u(()=>t("span",{class:"text-red-500"},"*",-1)),fe={key:0,class:"text-red-500 text-xs"},be={class:"space-y-2"},ye={for:"type",class:"block text-sm font-medium text-gray-700"},xe=u(()=>t("span",{class:"text-red-500"},"*",-1)),we={key:0,class:"text-red-500 text-xs"},ke={class:"space-y-2"},Ve={for:"role",class:"block text-sm font-medium text-gray-700"},De=u(()=>t("span",{class:"text-red-500"},"*",-1)),$e={key:0,class:"text-red-500 text-xs"},Ue={class:"space-y-2"},Ie={for:"email",class:"block text-sm font-medium text-gray-700"},Fe=u(()=>t("span",{class:"text-red-500"},"*",-1)),Ce={key:0,class:"text-red-500 text-xs"},je={class:"md:col-span-2 space-y-2"},Be={class:"block text-sm font-medium text-gray-700"},Re={class:"flex justify-center"},Se=["onDragover","onDrop"],Te={key:0,class:"p-4"},Ne={class:"relative group"},Ge=["src"],Le={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Pe={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Ee=["onClick"],Me=u(()=>t("i",{class:"pi pi-trash text-sm"},null,-1)),Ae=[Me],qe=u(()=>t("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[t("i",{class:"pi pi-pencil text-sm"})],-1)),ze={class:"mt-2 text-center text-sm text-gray-500"},Je={key:1,class:"p-8 flex flex-col items-center justify-center"},Oe=u(()=>t("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[t("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),He={class:"text-sm text-center text-gray-600 mb-1"},Ke={class:"text-blue-500 font-medium"},Qe=u(()=>t("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1)),We={class:"pt-4 flex justify-center"},Xe={key:0},Ye={key:1,class:"pi pi-spinner pi-spin"},Ze={setup(x){const P=Y(),V=Z(),{t:E}=ee(),l=_(),g=_(!1),$=_([]),w=_(null),h=_(null),f=_(!1),o=_({name:"",phone:"",type:null,role_id:null,email:""}),M=async()=>{try{const e=await D.get("api/role");$.value=e.data.data.data,J()}catch(e){console.error("Error fetching roles:",e)}},A=e=>{e.preventDefault(),f.value=!0},q=()=>{f.value=!1},z=e=>{w.value=e;const s=new FileReader;s.onload=r=>{h.value=r.target.result},s.readAsDataURL(e),f.value=!1},U=e=>{var r,c,m;const s=((r=e.target.files)==null?void 0:r[0])||((m=(c=e.dataTransfer)==null?void 0:c.files)==null?void 0:m[0]);s&&s.type.match("image.*")&&z(s)},J=()=>{D.get(`api/user/${V.currentRoute._value.params.id}`).then(e=>{var s,r,c,m;o.value.name=e.data.data.name,o.value.email=e.data.data.email,o.value.type=e.data.data.type,o.value.phone=e.data.data.phone,o.value.role_id=(s=e.data.data)==null?void 0:s.roles[0].id,h.value=(m=(c=(r=e.data)==null?void 0:r.data)==null?void 0:c.media[0])==null?void 0:m.url})},O=()=>{w.value=null,h.value=null},H=async()=>{g.value=!0;const e=new FormData;e.append("name",o.value.name),e.append("phone",o.value.phone),e.append("type",o.value.type),e.append("role_id",o.value.role_id),e.append("email",o.value.email),w.value&&e.append("image",w.value),D.post(`/api/user/${V.currentRoute._value.params.id}`,e).then(s=>{V.push({name:"users"})}).catch(s=>{console.error("Error:",s),P.add({severity:"error",summary:E("error"),detail:s.response.data.message,life:3e3}),g.value=!1})};return te(()=>{M()}),(e,s)=>{const r=b("InputText"),c=b("Dropdown"),m=b("Button"),K=b("Form"),Q=b("Toast"),W=se("can");return n(),d(ae,null,[oe((n(),d("div",de,[t("h1",ie,a(e.$t("user.edit_User")),1),p(K,{ref_key:"form",ref:l,model:o.value,rules:e.rules,onSubmit:k(H,["prevent"]),class:"space-y-6"},{default:L(()=>{var I,F,C,j,B,R,S,T,N,G;return[t("div",ue,[t("div",ce,[t("label",pe,[v(a(e.$t("user.name"))+" ",1),me]),p(r,{id:"name",modelValue:o.value.name,"onUpdate:modelValue":s[0]||(s[0]=i=>o.value.name=i),placeholder:e.$t("user.enter_full_name"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),(F=(I=l.value)==null?void 0:I.errors)!=null&&F.name?(n(),d("small",_e,a(l.value.errors.name[0].message),1)):y("",!0)]),t("div",ve,[t("label",ge,[v(a(e.$t("user.phone"))+" ",1),he]),p(r,{id:"phone",modelValue:o.value.phone,"onUpdate:modelValue":s[1]||(s[1]=i=>o.value.phone=i),placeholder:"+1 (___) ___-____",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(j=(C=l.value)==null?void 0:C.errors)!=null&&j.phone?(n(),d("small",fe,a(l.value.errors.phone[0].message),1)):y("",!0)]),t("div",be,[t("label",ye,[v(a(e.$t("user.type"))+" ",1),xe]),p(c,{id:"type",modelValue:o.value.type,"onUpdate:modelValue":s[2]||(s[2]=i=>o.value.type=i),options:[{label:"Admin",value:1},{label:"customer",value:2},{label:"User",value:2}],optionLabel:"label",optionValue:"value",placeholder:'$t("user.select_user_type")',class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(R=(B=l.value)==null?void 0:B.errors)!=null&&R.type?(n(),d("small",we,a(l.value.errors.type[0].message),1)):y("",!0)]),t("div",ke,[t("label",Ve,[v(a(e.$t("user.role"))+" ",1),De]),p(c,{id:"role",modelValue:o.value.role_id,"onUpdate:modelValue":s[3]||(s[3]=i=>o.value.role_id=i),options:$.value,optionLabel:"translated_name",optionValue:"id",placeholder:e.$t("user.select_role"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options","placeholder"]),(T=(S=l.value)==null?void 0:S.errors)!=null&&T.role_id?(n(),d("small",$e,a(l.value.errors.role_id[0].message),1)):y("",!0)]),t("div",Ue,[t("label",Ie,[v(a(e.$t("user.email"))+" ",1),Fe]),p(r,{id:"email",modelValue:o.value.email,"onUpdate:modelValue":s[4]||(s[4]=i=>o.value.email=i),type:"email",placeholder:"user@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(G=(N=l.value)==null?void 0:N.errors)!=null&&G.email?(n(),d("small",Ce,a(l.value.errors.email[0].message),1)):y("",!0)]),t("div",je,[t("label",Be,a(e.$t("user.profile_Image")),1),t("div",Re,[t("label",{onDragover:k(A,["prevent"]),onDragleave:q,onDrop:k(U,["prevent"]),class:le([{"border-blue-500 bg-blue-50":f.value,"border-gray-300":!f.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[t("input",{type:"file",onChange:U,accept:"image/*",class:"hidden"},null,32),h.value?(n(),d("div",Te,[t("div",Ne,[t("img",{src:h.value,alt:"Preview",class:"w-full h-64 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Ge),t("div",Le,[t("div",Pe,[t("button",{type:"button",onClick:k(O,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Ae,8,Ee),qe])])]),t("p",ze,a(e.$t("user.click_or_drag_to_change_photo")),1)])):(n(),d("div",Je,[Oe,t("p",He,[t("span",Ke,a(e.$t("user.click_to_upload")),1),v(" "+a(e.$t("user.or_drag_and_drop")),1)]),Qe]))],42,Se)])])]),t("div",We,[p(m,{type:"submit",label:"Update User",icon:"pi pi-user-plus",loading:g.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:g.value},{default:L(()=>[g.value?(n(),d("i",Ye)):(n(),d("span",Xe,a(e.$t("user.update_User")),1))]),_:1},8,["loading","disabled"])])]}),_:1},8,["model","rules","onSubmit"])])),[[W,"edit users"]]),p(Q)],64)}}},tt=X(Ze,[["__scopeId","data-v-3dc5ef86"]]);export{tt as default};
