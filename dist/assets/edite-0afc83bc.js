import{p as J,u as O,y as q,z as H,L as K,r as c,o as Q,d as f,C as W,e as d,f as i,E as X,i as u,w as E,J as x,F as Y,b as N,h as e,t as S,n as T,G as Z,j as ee,s as ae,v as te,m as C}from"./index-cc239839.js";const n=g=>(ae("data-v-945c0b99"),g=g(),te(),g),se={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},oe=n(()=>e("h1",{class:"text-3xl font-bold text-center mb-8 text-gray-800"},"Edit Brand",-1)),ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={class:"space-y-2"},le=n(()=>e("label",{for:"name_en",class:"block text-sm font-medium text-gray-700"},[C(" English Name "),e("span",{class:"text-red-500"},"*")],-1)),de={key:0,class:"text-red-500 text-xs"},ie={class:"space-y-2"},ce=n(()=>e("label",{for:"name_ar",class:"block text-sm font-medium text-gray-700"},[C(" Arabic Name "),e("span",{class:"text-red-500"},"*")],-1)),ue={key:0,class:"text-red-500 text-xs"},pe={class:"md:col-span-2 space-y-2"},me=n(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Brand Logo",-1)),_e={class:"flex justify-center"},ge=["onDragover","onDrop"],ve={key:0,class:"p-4"},he={class:"relative group"},be=["src"],fe={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},xe={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},ye=["onClick"],we=n(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),ke=[we],De={class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition cursor-pointer"},Ce=n(()=>e("i",{class:"pi pi-pencil text-sm"},null,-1)),Be=n(()=>e("p",{class:"mt-2 text-center text-sm text-gray-500"},"Click or drag to change logo",-1)),Ie={key:1,class:"p-8 flex flex-col items-center justify-center"},Ve=n(()=>e("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[e("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),Fe=n(()=>e("p",{class:"text-sm text-center text-gray-600 mb-1"},[e("span",{class:"text-blue-500 font-medium"},"Click to upload"),C(" or drag and drop ")],-1)),je=n(()=>e("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 2MB)",-1)),Ee=[Ve,Fe,je],Ne={class:"pt-4 flex justify-center space-x-4"},Se={key:0},Te={key:1,class:"pi pi-spinner pi-spin"},Ue={setup(g){const U=O(),y=q(),w=H(),{t:k}=K(),p=c(),o=c(!1),v=c(null),m=c(null),_=c(!1),B=c(U.params.id),r=c({name_en:"",name_ar:"",image:null}),G=async()=>{var t,a;try{o.value=!0;const s=await N.get(`/api/brand/${B.value}`);r.value=s.data.data,s.data.data.media[0].url&&(m.value=s.data.data.media[0].url),o.value=!1}catch(s){console.error("Error fetching brand:",s),w.add({severity:"error",summary:k("error"),detail:((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to fetch brand",life:3e3}),o.value=!1,y.push({name:"brand"})}};Q(()=>{G()});const L=t=>{t.preventDefault(),_.value=!0},P=()=>{_.value=!1},R=t=>{v.value=t;const a=new FileReader;a.onload=s=>{m.value=s.target.result},a.readAsDataURL(t),_.value=!1},D=t=>{var s,l,h;const a=((s=t.target.files)==null?void 0:s[0])||((h=(l=t.dataTransfer)==null?void 0:l.files)==null?void 0:h[0]);a&&a.type.match("image.*")&&R(a)},A=()=>{v.value=null,m.value=null,r.value.image=null},M=async()=>{o.value=!0;const t=new FormData;t.append("name_en",r.value.name_en),t.append("name_ar",r.value.name_ar),t.append("_method","post"),v.value?t.append("image",v.value):r.value.image===null&&t.append("remove_image","true"),N.post(`/api/brand/${B.value}`,t).then(a=>{y.push({name:"brand"}),w.add({severity:"success",summary:k("success"),detail:"Brand updated successfully",life:3e3}),o.value=!1}).catch(a=>{var s,l;console.error("Error:",a),w.add({severity:"error",summary:k("error"),detail:((l=(s=a.response)==null?void 0:s.data)==null?void 0:l.message)||"An error occurred",life:3e3}),o.value=!1})};return(t,a)=>{const s=f("InputText"),l=f("Button"),h=f("Form"),$=f("Toast"),z=W("can");return d(),i(Y,null,[X((d(),i("div",se,[oe,u(h,{ref_key:"form",ref:p,onSubmit:x(M,["prevent"]),class:"space-y-6"},{default:E(()=>{var I,V,F,j;return[e("div",ne,[e("div",re,[le,u(s,{id:"name_en",modelValue:r.value.name_en,"onUpdate:modelValue":a[0]||(a[0]=b=>r.value.name_en=b),placeholder:"Enter brand name in English",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(V=(I=p.value)==null?void 0:I.errors)!=null&&V.name_en?(d(),i("small",de,S(p.value.errors.name_en[0]),1)):T("",!0)]),e("div",ie,[ce,u(s,{id:"name_ar",modelValue:r.value.name_ar,"onUpdate:modelValue":a[1]||(a[1]=b=>r.value.name_ar=b),placeholder:"أدخل اسم العلامة التجارية بالعربية",dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(j=(F=p.value)==null?void 0:F.errors)!=null&&j.name_ar?(d(),i("small",ue,S(p.value.errors.name_ar[0]),1)):T("",!0)]),e("div",pe,[me,e("div",_e,[e("label",{onDragover:x(L,["prevent"]),onDragleave:P,onDrop:x(D,["prevent"]),class:Z([{"border-blue-500 bg-blue-50":_.value,"border-gray-300":!_.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[e("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32),m.value?(d(),i("div",ve,[e("div",he,[e("img",{src:m.value,alt:"Preview",class:"w-full h-64 object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,be),e("div",fe,[e("div",xe,[e("button",{type:"button",onClick:x(A,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},ke,8,ye),e("label",De,[Ce,e("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32)])])])]),Be])):(d(),i("div",Ie,Ee))],42,ge)])])]),e("div",Ne,[u(l,{type:"button",label:"Cancel",icon:"pi pi-times",onClick:a[2]||(a[2]=b=>ee(y).go(-1)),class:"px-6 mx-2 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:o.value},null,8,["disabled"]),u(l,{type:"submit",label:"Update Brand",icon:"pi pi-check",loading:o.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:o.value},{default:E(()=>[o.value?(d(),i("i",Te)):(d(),i("span",Se,"Update Brand"))]),_:1},8,["loading","disabled"])])]}),_:1},8,["onSubmit"])])),[[z,"edit brands"]]),u($)],64)}}},Le=J(Ue,[["__scopeId","data-v-945c0b99"]]);export{Le as default};
