import{_ as O,u as X,f as Y,G as Z,r,w as ee,o as te,h as i,i as V,b as B,c as se,j as o,e as s,k as n,l as g,m as ae,B as t,a as $,t as p,n as w,x as oe,y as le}from"./index-db4827c8.js";const k=m=>(oe("data-v-3e2af03c"),m=m(),le(),m),re={class:"grid"},ne={class:"col-12"},ie={class:"card p-4 shadow-2 border-round"},ce={class:"text-2xl font-bold"},de={class:"flex gap-2"},ue={class:"p-input-icon-left"},pe=k(()=>o("i",{class:"pi pi-search"},null,-1)),_e={class:"card shadow-1 surface-0"},me={class:"text-center py-4"},ve=k(()=>o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),he={class:"text-xl"},fe={class:"flex justify-content-center align-items-center py-4"},ge={class:"flex align-items-center justify-content-center"},ye=k(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),be={setup(m){const C=X(),y=Y(),{t:e}=Z(),v=r(!0),T=r([]),_=r(!1),P=r(null),D=r(null),L=r({}),h=r("");r(null);const S=r(1),I=r(0),b=r(10),N=r(0),x=()=>{v.value=!0,$.get("/api/user",{params:{pageNumber:S.value,pageSize:b.value,search:h.value||void 0}}).then(l=>{T.value=l.data.data.data,I.value=l.data.data.total,N.value=l.data.data.last_page,v.value=!1}).catch(l=>{y.add({severity:"error",summary:e("error"),detail:e("user.loadError"),life:3e3}),v.value=!1,console.error("Error fetching data:",l)})};ee([S,b,h],()=>{x()});const U=l=>{P.value=l,_.value=!0},E=()=>{$.delete(`/api/user/${P.value}`).then(()=>{y.add({severity:"success",summary:e("success"),detail:e("user.deleteSuccess"),life:3e3}),x(),_.value=!1}).catch(l=>{y.add({severity:"error",summary:e("error"),detail:e("user.deleteError"),life:3e3})})},j=()=>{D.value.exportCSV()},G=()=>{C.push({name:"user-create"})},z=l=>{C.push({name:"user-edit",params:{id:l}})},M=l=>({Admin:"info",Customer:"success",Guest:"danger"})[l]||"warning";return te(()=>{x()}),(l,c)=>{const A=i("InputText"),d=i("Button"),F=i("Toolbar"),Q=i("Toast"),u=i("Column"),W=i("Tag"),q=i("ProgressSpinner"),H=i("DataTable"),J=i("Dialog"),f=V("can"),R=V("tooltip");return B(),se("div",re,[o("div",ne,[o("div",ie,[s(F,{class:"mb-4"},{start:n(()=>[o("h2",ce,p(t(e)("user.managementTitle")),1)]),end:n(()=>[o("div",de,[o("span",ue,[pe,s(A,{modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=a=>h.value=a),placeholder:t(e)("user.search")},null,8,["modelValue","placeholder"])]),s(d,{label:t(e)("user.export"),icon:"pi pi-upload",class:"p-export",onClick:j},null,8,["label"]),g(s(d,{label:t(e)("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:G},null,8,["label"]),[[f,"create users"]])])]),_:1}),s(Q),o("div",_e,[g((B(),ae(H,{ref_key:"dt",ref:D,value:T.value,loading:v.value,"data-key":"id",paginator:!0,rows:b.value,filters:L.value,totalRecords:I.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,20,30],"current-page-report-template":`${t(e)("show")} {first} ${t(e)("to")} {last} ${t(e)("from")} {totalRecords}`,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:n(()=>[o("div",me,[ve,o("p",he,p(t(e)("user.noData")),1)])]),loading:n(()=>[o("div",fe,[s(q,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:n(()=>[s(u,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(u,{field:"name",header:t(e)("user.name"),sortable:!0},{body:n(a=>[w(p(a.data.name),1)]),_:1},8,["header"]),s(u,{field:"email",header:t(e)("user.email"),sortable:!0},{body:n(a=>[w(p(a.data.email),1)]),_:1},8,["header"]),s(u,{field:"phone",header:t(e)("user.phone"),sortable:!0},{body:n(a=>[w(p(a.data.phone),1)]),_:1},8,["header"]),s(u,{field:"type_description",header:t(e)("user.type"),sortable:!0},{body:n(a=>[s(W,{value:a.data.type_description,severity:M(a.data.type_description)},null,8,["value","severity"])]),_:1},8,["header"]),s(u,{header:t(e)("actions"),headerStyle:"width: 12rem"},{body:n(a=>[g(s(d,{icon:"pi pi-pencil",class:"p-detail mr-2",onClick:K=>z(a.data.id)},null,8,["onClick"]),[[f,"edit users"],[R,t(e)("edit"),void 0,{top:!0}]]),g(s(d,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:K=>U(a.data.id)},null,8,["onClick"]),[[f,"delete users"],[R,t(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords","current-page-report-template"])),[[f,"list users"]])]),s(J,{visible:_.value,"onUpdate:visible":c[2]||(c[2]=a=>_.value=a),style:{width:"450px"},header:t(e)("user.deleteConfirmTitle"),modal:!0},{footer:n(()=>[s(d,{label:t(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:c[1]||(c[1]=a=>_.value=!1)},null,8,["label"]),s(d,{label:t(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:E},null,8,["label"])]),default:n(()=>[o("div",ge,[ye,o("span",null,p(t(e)("user.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},we=O(be,[["__scopeId","data-v-3e2af03c"]]);export{we as default};
