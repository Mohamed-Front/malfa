import{p as Q,H as E,y as W,z as X,L as Y,r as u,o as Z,b as T,d as v,C as ee,e as l,f as r,E as te,i as p,w as U,J as h,F as ae,h as e,t as D,n as C,j as G,G as se,s as oe,v as ne,m as y}from"./index-cc239839.js";const o=b=>(oe("data-v-0f2d7e6a"),b=b(),ne(),b),le={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},re=o(()=>e("h1",{class:"text-3xl font-bold text-center mb-8 text-gray-800"},"Create New Model",-1)),de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie={class:"space-y-2"},ce=o(()=>e("label",{for:"name_en",class:"block text-sm font-medium text-gray-700"},[y(" English Name "),e("span",{class:"text-red-500"},"*")],-1)),ue={key:0,class:"text-red-500 text-xs"},pe={class:"space-y-2"},me=o(()=>e("label",{for:"name_ar",class:"block text-sm font-medium text-gray-700"},[y(" Arabic Name "),e("span",{class:"text-red-500"},"*")],-1)),_e={key:0,class:"text-red-500 text-xs"},ge={class:"space-y-2"},ve=o(()=>e("label",{for:"brand_id",class:"block text-sm font-medium text-gray-700"},[y(" Brand "),e("span",{class:"text-red-500"},"*")],-1)),be={key:0,class:"text-red-500 text-xs"},fe={class:"md:col-span-2 space-y-2"},xe=o(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Model Image",-1)),he={class:"flex justify-center"},ye=["onDragover","onDrop"],we={key:0,class:"p-4"},ke={class:"relative group"},De=["src"],Ce={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Ve={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Ie=["onClick"],Fe=o(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),Se=[Fe],je=o(()=>e("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[e("i",{class:"pi pi-pencil text-sm"})],-1)),Le=o(()=>e("p",{class:"mt-2 text-center text-sm text-gray-500"},"Click or drag to change image",-1)),Me={key:1,class:"p-8 flex flex-col items-center justify-center"},Ne=o(()=>e("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[e("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),Be=o(()=>e("p",{class:"text-sm text-center text-gray-600 mb-1"},[e("span",{class:"text-blue-500 font-medium"},"Click to upload"),y(" or drag and drop ")],-1)),Ee=o(()=>e("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 2MB)",-1)),Te=[Ne,Be,Ee],Ue={class:"pt-4 flex justify-center space-x-4"},Ge={key:0},Pe={key:1,class:"pi pi-spinner pi-spin"},Ae={setup(b){const P=E(()=>localStorage.getItem("appLang")||"en"),A=E(()=>P.value==="en"?"name_en":"name_ar"),V=W(),w=X(),{t:k}=Y(),d=u(),i=u(!1),f=u(null),x=u(null),_=u(!1),I=u([]),n=u({name_en:"",name_ar:"",brand_id:null});Z(async()=>{var a,t;try{const s=await T.get("/api/brand");I.value=s.data.data.data}catch(s){console.error("Error fetching brands:",s),w.add({severity:"error",summary:k("error"),detail:((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to load brands",life:3e3})}});const R=a=>{a.preventDefault(),_.value=!0},z=()=>{_.value=!1},J=a=>{f.value=a;const t=new FileReader;t.onload=s=>{x.value=s.target.result},t.readAsDataURL(a),_.value=!1},F=a=>{var s,c,g;const t=((s=a.target.files)==null?void 0:s[0])||((g=(c=a.dataTransfer)==null?void 0:c.files)==null?void 0:g[0]);t&&t.type.match("image.*")&&J(t)},H=()=>{f.value=null,x.value=null},O=async()=>{i.value=!0;const a=new FormData;a.append("name_en",n.value.name_en),a.append("name_ar",n.value.name_ar),a.append("brand_id",n.value.brand_id),f.value&&a.append("image",f.value),T.post("/api/model",a).then(t=>{V.push({name:"model"}),w.add({severity:"success",summary:k("success"),detail:"Model created successfully",life:3e3}),i.value=!1}).catch(t=>{var s,c;console.error("Error:",t),w.add({severity:"error",summary:k("error"),detail:((c=(s=t.response)==null?void 0:s.data)==null?void 0:c.message)||"An error occurred",life:3e3}),i.value=!1})};return(a,t)=>{const s=v("InputText"),c=v("Dropdown"),g=v("Button"),$=v("Form"),q=v("Toast"),K=ee("can");return l(),r(ae,null,[te((l(),r("div",le,[re,p($,{ref_key:"form",ref:d,onSubmit:h(O,["prevent"]),class:"space-y-6"},{default:U(()=>{var S,j,L,M,N,B;return[e("div",de,[e("div",ie,[ce,p(s,{id:"name_en",modelValue:n.value.name_en,"onUpdate:modelValue":t[0]||(t[0]=m=>n.value.name_en=m),placeholder:"Enter model name in English",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(j=(S=d.value)==null?void 0:S.errors)!=null&&j.name_en?(l(),r("small",ue,D(d.value.errors.name_en[0]),1)):C("",!0)]),e("div",pe,[me,p(s,{id:"name_ar",modelValue:n.value.name_ar,"onUpdate:modelValue":t[1]||(t[1]=m=>n.value.name_ar=m),placeholder:"أدخل اسم الموديل بالعربية",dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(M=(L=d.value)==null?void 0:L.errors)!=null&&M.name_ar?(l(),r("small",_e,D(d.value.errors.name_ar[0]),1)):C("",!0)]),e("div",ge,[ve,p(c,{id:"brand_id",modelValue:n.value.brand_id,"onUpdate:modelValue":t[2]||(t[2]=m=>n.value.brand_id=m),options:I.value,optionLabel:G(A),optionValue:"id",placeholder:"Select a brand",class:"w-full"},null,8,["modelValue","options","optionLabel"]),(B=(N=d.value)==null?void 0:N.errors)!=null&&B.brand_id?(l(),r("small",be,D(d.value.errors.brand_id[0]),1)):C("",!0)]),e("div",fe,[xe,e("div",he,[e("label",{onDragover:h(R,["prevent"]),onDragleave:z,onDrop:h(F,["prevent"]),class:se([{"border-blue-500 bg-blue-50":_.value,"border-gray-300":!_.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[e("input",{type:"file",onChange:F,accept:"image/*",class:"hidden"},null,32),x.value?(l(),r("div",we,[e("div",ke,[e("img",{src:x.value,alt:"Preview",class:"w-full h-64 object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,De),e("div",Ce,[e("div",Ve,[e("button",{type:"button",onClick:h(H,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Se,8,Ie),je])])]),Le])):(l(),r("div",Me,Te))],42,ye)])])]),e("div",Ue,[p(g,{type:"button",label:"Cancel",icon:"pi pi-times",onClick:t[3]||(t[3]=m=>G(V).go(-1)),class:"px-6 py-3 mx-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:i.value},null,8,["disabled"]),p(g,{type:"submit",label:"Create Model",icon:"pi pi-plus",loading:i.value,class:"px-8 mx-2 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:i.value},{default:U(()=>[i.value?(l(),r("i",Pe)):(l(),r("span",Ge,"Create Model"))]),_:1},8,["loading","disabled"])])]}),_:1},8,["onSubmit"])])),[[K,"create models"]]),p(q)],64)}}},ze=Q(Ae,[["__scopeId","data-v-0f2d7e6a"]]);export{ze as default};
