import{_ as Q,A as T,u as W,f as X,G as Y,r as u,o as Z,a as E,h as v,i as ee,b as l,c as r,l as ae,e as p,k as U,D as f,p as te,j as e,t as D,v as V,B as G,s as se,x as oe,y as ne,n as y}from"./index-db4827c8.js";const o=b=>(oe("data-v-0634d10a"),b=b(),ne(),b),le={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},re=o(()=>e("h1",{class:"text-3xl font-bold text-center mb-8 text-gray-800"},"Create New Model",-1)),de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie={class:"space-y-2"},ce=o(()=>e("label",{for:"name_en",class:"block text-sm font-medium text-gray-700"},[y(" English Name "),e("span",{class:"text-red-500"},"*")],-1)),ue={key:0,class:"text-red-500 text-xs"},pe={class:"space-y-2"},me=o(()=>e("label",{for:"name_ar",class:"block text-sm font-medium text-gray-700"},[y(" Arabic Name "),e("span",{class:"text-red-500"},"*")],-1)),_e={key:0,class:"text-red-500 text-xs"},ge={class:"space-y-2"},ve=o(()=>e("label",{for:"brand_id",class:"block text-sm font-medium text-gray-700"},[y(" Brand "),e("span",{class:"text-red-500"},"*")],-1)),be={key:0,class:"text-red-500 text-xs"},xe={class:"md:col-span-2 space-y-2"},he=o(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Model Image",-1)),fe={class:"flex justify-center"},ye=["onDragover","onDrop"],we={key:0,class:"p-4"},ke={class:"relative group"},De=["src"],Ve={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Ce={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Ie=["onClick"],Fe=o(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),Se=[Fe],je=o(()=>e("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[e("i",{class:"pi pi-pencil text-sm"})],-1)),Be=o(()=>e("p",{class:"mt-2 text-center text-sm text-gray-500"},"Click or drag to change image",-1)),Me={key:1,class:"p-8 flex flex-col items-center justify-center"},Ne=o(()=>e("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[e("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),Le=o(()=>e("p",{class:"text-sm text-center text-gray-600 mb-1"},[e("span",{class:"text-blue-500 font-medium"},"Click to upload"),y(" or drag and drop ")],-1)),Te=o(()=>e("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 2MB)",-1)),Ee=[Ne,Le,Te],Ue={class:"pt-4 flex justify-center space-x-4"},Ge={key:0},Ae={key:1,class:"pi pi-spinner pi-spin"},Pe={setup(b){const A=T(()=>localStorage.getItem("appLang")||"en"),P=T(()=>A.value==="en"?"name_en":"name_ar"),C=W(),w=X(),{t:k}=Y(),d=u(),i=u(!1),x=u(null),h=u(null),_=u(!1),I=u([]),n=u({name_en:"",name_ar:"",brand_id:null});Z(async()=>{var t,a;try{const s=await E.get("/api/brand");I.value=s.data.data.data}catch(s){console.error("Error fetching brands:",s),w.add({severity:"error",summary:k("error"),detail:((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to load brands",life:3e3})}});const R=t=>{t.preventDefault(),_.value=!0},z=()=>{_.value=!1},J=t=>{x.value=t;const a=new FileReader;a.onload=s=>{h.value=s.target.result},a.readAsDataURL(t),_.value=!1},F=t=>{var s,c,g;const a=((s=t.target.files)==null?void 0:s[0])||((g=(c=t.dataTransfer)==null?void 0:c.files)==null?void 0:g[0]);a&&a.type.match("image.*")&&J(a)},O=()=>{x.value=null,h.value=null},$=async()=>{i.value=!0;const t=new FormData;t.append("name_en",n.value.name_en),t.append("name_ar",n.value.name_ar),t.append("brand_id",n.value.brand_id),x.value&&t.append("image",x.value),E.post("/api/model",t).then(a=>{C.push({name:"model"}),w.add({severity:"success",summary:k("success"),detail:"Model created successfully",life:3e3}),i.value=!1}).catch(a=>{var s,c;console.error("Error:",a),w.add({severity:"error",summary:k("error"),detail:((c=(s=a.response)==null?void 0:s.data)==null?void 0:c.message)||"An error occurred",life:3e3}),i.value=!1})};return(t,a)=>{const s=v("InputText"),c=v("Dropdown"),g=v("Button"),q=v("Form"),H=v("Toast"),K=ee("can");return l(),r(te,null,[ae((l(),r("div",le,[re,p(q,{ref_key:"form",ref:d,onSubmit:f($,["prevent"]),class:"space-y-6"},{default:U(()=>{var S,j,B,M,N,L;return[e("div",de,[e("div",ie,[ce,p(s,{id:"name_en",modelValue:n.value.name_en,"onUpdate:modelValue":a[0]||(a[0]=m=>n.value.name_en=m),placeholder:"Enter model name in English",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(j=(S=d.value)==null?void 0:S.errors)!=null&&j.name_en?(l(),r("small",ue,D(d.value.errors.name_en[0]),1)):V("",!0)]),e("div",pe,[me,p(s,{id:"name_ar",modelValue:n.value.name_ar,"onUpdate:modelValue":a[1]||(a[1]=m=>n.value.name_ar=m),placeholder:"أدخل اسم الموديل بالعربية",dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(M=(B=d.value)==null?void 0:B.errors)!=null&&M.name_ar?(l(),r("small",_e,D(d.value.errors.name_ar[0]),1)):V("",!0)]),e("div",ge,[ve,p(c,{id:"brand_id",modelValue:n.value.brand_id,"onUpdate:modelValue":a[2]||(a[2]=m=>n.value.brand_id=m),options:I.value,optionLabel:G(P),optionValue:"id",placeholder:"Select a brand",class:"w-full"},null,8,["modelValue","options","optionLabel"]),(L=(N=d.value)==null?void 0:N.errors)!=null&&L.brand_id?(l(),r("small",be,D(d.value.errors.brand_id[0]),1)):V("",!0)]),e("div",xe,[he,e("div",fe,[e("label",{onDragover:f(R,["prevent"]),onDragleave:z,onDrop:f(F,["prevent"]),class:se([{"border-blue-500 bg-blue-50":_.value,"border-gray-300":!_.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[e("input",{type:"file",onChange:F,accept:"image/*",class:"hidden"},null,32),h.value?(l(),r("div",we,[e("div",ke,[e("img",{src:h.value,alt:"Preview",class:"w-full h-64 object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,De),e("div",Ve,[e("div",Ce,[e("button",{type:"button",onClick:f(O,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Se,8,Ie),je])])]),Be])):(l(),r("div",Me,Ee))],42,ye)])])]),e("div",Ue,[p(g,{type:"button",label:"Cancel",icon:"pi pi-times",onClick:a[3]||(a[3]=m=>G(C).go(-1)),class:"px-6 py-3 mx-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:i.value},null,8,["disabled"]),p(g,{type:"submit",label:"Create Model",icon:"pi pi-plus",loading:i.value,class:"px-8 mx-2 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:i.value},{default:U(()=>[i.value?(l(),r("i",Ae)):(l(),r("span",Ge,"Create Model"))]),_:1},8,["loading","disabled"])])]}),_:1},8,["onSubmit"])])),[[K,"create models"]]),p(H)],64)}}},ze=Q(Pe,[["__scopeId","data-v-0634d10a"]]);export{ze as default};
